<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    <link rel="stylesheet" href="/static/css/header.css">
    <link rel="stylesheet" href="/static/css/cart.css">
</head>
<body>
    <div class="page-container">
        <!-- –®–∞–ø–∫–∞ -->
         <header class="header">
    <div class="header-container">
        <div class="header-inner">
            <a href="/catalog" class="logo">
                <img src="/static/images/logo.jpg" alt="GainWave" class="logo-img">
                <span>GainWave</span>
            </a>
            <nav class="nav">
                <a href="/catalog" class="nav-link">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="/cart" class="nav-link active">–ö–æ—Ä–∑–∏–Ω–∞</a>
                <a href="/profile" class="nav-link">–ü—Ä–æ—Ñ–∏–ª—å</a>
                <form action="/logout" method="POST" class="logout-form">
                    <button type="submit" class="logout-btn">–í—ã–π—Ç–∏</button>
                </form>
            </nav>
        </div>
    </div>
</header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main">
            <div class="container">
                <div class="cart-page">
                    <h1 class="page-title">–ö–æ—Ä–∑–∏–Ω–∞</h1>
                    
                    {{if .UserCart}}
                    <div class="cart-layout">
                        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - —Ç–æ–≤–∞—Ä—ã -->
                        <div class="cart-items-section">
                            <div class="section-header">
                                <h2>–¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ</h2>
                                <span>{{.TotalItems}} —Ç–æ–≤–∞—Ä–∞</span>
                            </div>
                            
                            <div class="cart-items-list">
                                {{range .UserCart}}
                                <div class="cart-item">
                                    <div class="item-image">
                                        {{$imagePath := printf "/static/images/%s/%s" .CategoryName .ImageURL}}
                                        <img src="{{$imagePath}}" alt="{{.ProductName}}">
                                    </div>
                                    
                                    <div class="item-details">
                                        <h3 class="product-name">{{.ProductName}}</h3>
                                        <p class="product-category">{{.CategoryName}}</p>
                                        <p class="product-brand">{{.ProducerName}}</p>
                                        <div class="product-price">{{.Price}} BYN/—à—Ç</div>
                                    </div>
                                    
                                    <div class="item-controls">
                                        <div class="quantity-display">
                                            <span class="quantity-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</span>
                                            <span class="quantity-value">{{.Quantity}} —à—Ç.</span>
                                        </div>
                                        
                                        <div class="item-total">
                                            {{.TotalPrice}} BYN
                                        </div>
                                         <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è -->
                                        <form action="/delete-from-cart" method="POST" class="remove-form">
                                            <input type="hidden" name="product_id" value="{{.ProductID}}">
                                            <button type="submit" class="btn-remove">
                                                üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                                            </button>
                                        </form>
                                    </div>
                                </div>
                                {{end}}
                            </div>
                        </div>

                        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –∏—Ç–æ–≥–∏ -->
                        <div class="order-summary">
                            <div class="summary-card">
                                <h3>–í–∞—à –∑–∞–∫–∞–∑</h3>
                                
                                <div class="summary-line">
                                    <span>–¢–æ–≤–∞—Ä—ã ({{.TotalItems}} —à—Ç.)</span>
                                    <span>{{.Subtotal}} BYN</span>
                                </div>
                                
                                <div class="summary-total">
                                    <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ</span>
                                    <span class="total-price">{{.Subtotal}} BYN</span>
                                </div>
                                
                                <form action="/process-payment" method="POST" class="payment-form">
                                    <button type="submit" class="continue-btn">–û–ø–ª–∞—Ç–∏—Ç—å</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    {{else}}
                    <!-- –ü—É—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞ -->
                    <div class="empty-cart">
                        <div class="empty-cart-icon">üõí</div>
                        <h2>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h2>
                        <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
                        <a href="/catalog" class="btn-primary">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
                    </div>
                    {{end}}
                </div>
            </div>
        </main>
    </div>
</body>
</html>